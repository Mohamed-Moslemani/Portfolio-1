import{r as l,b as p,p as m,j as a,L as j,t as N}from"./index-CWWcgzDI.js";const v=s=>{if(typeof document>"u")return;let n=document.head.querySelector('link[rel="canonical"]');n||(n=document.createElement("link"),n.rel="canonical",document.head.appendChild(n)),n.href=s};function u(s){return(s||"").toLowerCase()}function w(){const[s,n]=l.useState(""),[r,i]=l.useState("all"),[o,d]=p(),g=l.useRef(null),x=l.useMemo(()=>{const e=new Set;return m.forEach(t=>(t.tags||[]).forEach(c=>e.add(c))),["all",...Array.from(e).sort()]},[]);l.useEffect(()=>{if(typeof document>"u")return;document.title="Writing | M. Moslemani";const e=window.location.origin;v(e+"/writing")},[o]),l.useEffect(()=>{const e=t=>{if(t.key!=="/"||t.metaKey||t.ctrlKey||t.altKey)return;const c=t.target?.tagName;c==="INPUT"||c==="TEXTAREA"||t.target?.isContentEditable||(t.preventDefault(),g.current?.focus())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),l.useEffect(()=>{const e=o.get("tag");e&&i(e)},[]);const h=l.useMemo(()=>{const e=u(s);return m.filter(t=>{const c=!e||u(t.title).includes(e)||u(t.excerpt).includes(e),b=r==="all"||(t.tags||[]).includes(r);return c&&b})},[s,r]);return a.jsxs("section",{className:"blog-index","aria-label":"Writing index",children:[a.jsxs("header",{className:"blog-index-header",children:[a.jsx("h1",{children:"Writing"}),a.jsx("p",{className:"blog-index-subtitle",children:"Essays on AI systems, ML in production, and making research useful."}),a.jsxs("div",{className:"blog-index-controls",children:[a.jsxs("div",{className:"blog-search-wrap",children:[a.jsx("input",{ref:g,type:"search",className:"blog-search",placeholder:"Search posts... ( / to focus )","aria-label":"Search posts",value:s,onChange:e=>n(e.target.value)}),a.jsx("button",{type:"button",className:`blog-search-clear ${s?"visible":""}`,"aria-label":"Clear search",onClick:()=>{n(""),g.current?.focus()},children:"x"})]}),a.jsx("div",{className:"blog-tags",role:"list","aria-label":"Filter by tag",children:x.map(e=>a.jsx("button",{className:`tag-chip ${r===e?"active":""}`,onClick:()=>{i(e),d(e==="all"?{}:{tag:e})},role:"listitem","aria-pressed":r===e,children:e},e))})]})]}),a.jsxs("div",{className:"blog-index-list",role:"list",children:[h.map(e=>a.jsxs(j,{to:`/writing/${e.slug}`,className:"blog-index-card",role:"listitem",onClick:()=>N({action:"blog_index_click",category:"navigation",label:e.slug}),children:[a.jsxs("div",{className:"blog-card-content",children:[a.jsx("h2",{className:"blog-card-title",children:f(e.title,s)}),a.jsx("p",{className:"blog-card-excerpt",children:f(e.excerpt,s)}),a.jsxs("div",{className:"blog-card-meta",children:[a.jsx("span",{className:"blog-card-date",children:new Date(e.date).toLocaleDateString()}),a.jsx("div",{className:"blog-card-tags",children:(e.tags||[]).map(t=>a.jsx("span",{className:"blog-card-tag",children:t},t))})]})]}),a.jsx("span",{className:"blog-card-arrow",children:"â†’"})]},e.slug)),h.length===0&&a.jsx("div",{className:"blog-empty",children:"No posts match your filters."})]})]})}function f(s,n){if(!n)return s;const r=s.toLowerCase().indexOf(n.toLowerCase());if(r===-1)return s;const i=s.slice(0,r),o=s.slice(r,r+n.length),d=s.slice(r+n.length);return a.jsxs(a.Fragment,{children:[i,a.jsx("mark",{children:o}),d]})}export{w as default};
